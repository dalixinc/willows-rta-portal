<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - The Willows RTA</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <div class="container">
        <header class="site-header">
            <h1>üèòÔ∏è The Willows RTA - Admin Dashboard</h1>
            <div class="user-info">
                <span>Logged in as: <strong class="admin-username" th:text="${username}"></strong></span>
                <form th:action="@{/logout}" method="post" style="display: inline;">
                    <button type="submit" class="btn btn-small btn-secondary">Logout</button>
                </form>
            </div>
        </header>

        <nav class="admin-nav">
            <a href="/admin/dashboard" class="active">Dashboard</a>
            <a href="/admin/members">Members</a>
            <a href="/member/directory">Members Directory</a>
            <a href="/notices">Notice Board</a>
            <a href="/chat">Chat</a>
            <a href="/admin/analytics">Analytics</a>        <!-- NEW -->
            <a href="/admin/blocks">Block Config</a>
            <a href="/constitution">Constitution</a>
        </nav>

        <div class="dashboard-stats">
            <div class="stat-card">
                <h3 th:text="${totalMembers}">0</h3>
                <p>Total Members</p>
            </div>
            <div class="stat-card stat-success">
                <h3 th:text="${activeMembers}">0</h3>
                <p>Active Members</p>
            </div>
            <div class="stat-card" th:classappend="${membersWithoutAccounts > 0} ? 'stat-warning' : ''">
                <h3 th:text="${membersWithoutAccounts}">0</h3>
                <p>Pending Login Setup</p>
            </div>
            <div class="stat-card">
                <h3 th:text="${totalMembers - activeMembers}">0</h3>
                <p>Inactive Members</p>
            </div>
        </div>

        <div class="quick-actions">
            <h2>Quick Actions</h2>
            <div class="action-cards">
                <div class="card">
                    <h4>üë• View All Members</h4>
                    <p>Manage member registrations and details</p>
                    <a href="/admin/members" class="btn btn-primary">Go to Members</a>
                </div>
                <div class="card">
                    <h4>‚ûï Add New Member</h4>
                    <p>Manually add member from paper form or email</p>
                    <a href="/admin/members/add" class="btn btn-success">Add Member</a>
                </div>
                <div class="card" th:if="${membersWithoutAccounts > 0}">
                    <h4>‚ö†Ô∏è Pending Login Setup</h4>
                    <p th:text="${membersWithoutAccounts} + ' member(s) need login accounts'">0 members need login accounts</p>
                    <a href="/admin/members/no-accounts" class="btn btn-primary">Create Accounts</a>
                </div>
                <div class="card">
                    <h4>üìã Constitution</h4>
                    <p>View the association's constitution</p>
                    <a href="/constitution" class="btn btn-secondary">View Constitution</a>
                </div>
            </div>
        </div>

        <footer class="site-footer">
            <p>&copy; 2026 The Willows RTA</p>
        </footer>
    </div>
</body>
</html>
